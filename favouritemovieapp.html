<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Favourite Movie</title>
    <link rel="stylesheet" href="favourtiemovieapp.css" />
  </head>
  <body>
    <div class="main">
      <div class="choices">
        <h1 class="selection_title">What would you like to do?</h1>

        <button class="add_movie">Add a Movie</button>
        <button class="list_movie">List movies</button>
        <button class="find_movie">Find a Movie</button>
      </div>

      <div class="listcontainer">
        <p class="liststuff"></p>
      </div>
    </div>

    <div class="addContainer">
      <div class="toggle">X</div>

      <div class="add_movie_to_list">
        <label for="movieName">Movie Name</label>
        <input
          type="text"
          placeholder="Enter movie name"
          class="nameField"
          id="movieName"
        />

        <label for="movieDirector">Movie Director</label>
        <input
          type="text"
          id="movieDirector"
          class="directorField"
          placeholder="Enter movie director"
        />

        <label for="releaseYear">Release Year</label>
        <input
          type="tel"
          class="r_year"
          id="releaseYear"
          inputmode="numeric"
          placeholder="Enter release year"
        />

        <button class="addBtn">Add to List</button>
      </div>
    </div>

    <div class="findContainer">
      <div class="display"></div>
      <input
        type="text"
        placeholder="Enter movie name"
        class="nameFieldFinder"
        id="movieNameFinder"
      />
      <button class="find">Search</button>
    </div>

    <script>
      let addMovie = document.querySelector(".add_movie");
      let listMovie = document.querySelector(".list_movie");
      const findMovie = document.querySelector(".find_movie");
      const toggler = document.querySelector(".toggle");
      const choices = document.querySelector(".choices");
      const modalContainer = document.querySelector(".addContainer");
      const modalStuff = document.querySelector(".add_movie_to_list");
      const addBtn = document.querySelector(".addBtn");
      const listContainer = document.querySelector(".listcontainer");
      const findContainer = document.querySelector(".findContainer");

      let movieList = [];
      addMovie.addEventListener("click", () => {
        modalContainer.classList.add("active");
        choices.classList.add("active");
        listContainer.classList.remove("active");
        findContainer.classList.remove("active");
      });

      let inpyt = document.querySelectorAll(
        "input:not([class = nameFieldFinder])"
      );
      addBtn.addEventListener("click", () => {
        let valuess = Array.from(inpyt).reduce(
          (acc, inpyt) => ({ ...acc, [inpyt.id]: inpyt.value }),
          {}
        );
        movieList.push(valuess);
        alert("Success!");

        let movies = new Set(movieList);
      });

      toggler.addEventListener("click", () => {
        modalContainer.classList.remove("active");
        choices.classList.remove("active");
      });

      listMovie.addEventListener("click", () => {
        listContainer.classList.add("active");
        findContainer.classList.remove("active");
        let contList = document.querySelector(".liststuff");
        if (movieList.length == 0) {
          contList.innerText = "There are no movies in the list";
        } else {
          let sent = [];
          movieList.forEach((movie) => {
            let word =
              "Movie name: " +
              movie.movieName +
              " directed by " +
              movie.movieDirector +
              " in " +
              movie.releaseYear +
              " <br />";
            sent.push(word);

            for (let i = 0; i < sent.length; i++) {
              let sentence = sent.toString().split(",");
              contList.innerHTML = sentence;
            }
          });
        }
      });

      findMovie.addEventListener("click", () => {
        listContainer.classList.remove("active");
        findContainer.classList.add("active");

        let textDisplay = document.querySelector(".display");
        let searchBtn = document.querySelector(".find");
        searchBtn.addEventListener("click", () => {
          let findM = document.querySelector(".nameFieldFinder");
          const Movieresult = movieList.find(({ movieName,movieDirector,releaseYear }) => movieName === findM.value);
          // const Directorresult = movieList.find(({ movieDirector }) => movieDirector === findM.value);
          // const yearresult = movieList.find(({ releaseYear }) => releaseYear === findM.value);
          

          console.log(Movieresult)
          // console.log(Directorresult)
          // console.log(yearresult)
          if (Movieresult //|| Directorresult || yearresult
          ){
            // for (let i = 0; i < Movieresult.length; i++) {
            //   let sentence = Movieresult.toString().split(",");
            //   console.log(sentence);
              textDisplay.innerHTML = "The movies with found are: <br />" + Movieresult.movieName + " by " + Movieresult.movieDirector + " in " + Movieresult.releaseYear
            // }

          }

        });
      });
    </script>
  </body>
</html>
